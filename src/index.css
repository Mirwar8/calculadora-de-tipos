@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply font-display text-slate-900 dark:text-white bg-background-light dark:bg-background-dark;
    zoom: 1;
    -moz-transform: scale(1);
    -moz-transform-origin: 0 0;
    transform-origin: top left;
    
    /* Fluid typography using clamp() for smooth scaling */
    font-size: clamp(14px, 1.2vw, 20px);
    
    /* Prevent text zoom distortion */
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
  }
  
  /* Fine-tuned breakpoints for better transitions */
  @media (min-width: 768px) {
    body {
      font-size: clamp(15px, 1.1vw, 18px);
    }
  }
  
  @media (min-width: 1024px) {
    body {
      font-size: clamp(16px, 1vw, 18px);
    }
  }
  
  @media (min-width: 1440px) {
    body {
      font-size: clamp(17px, 0.9vw, 19px);
    }
  }
  
  @media (min-width: 1800px) {
    font-size: clamp(18px, 0.85vw, 20px);
  }
  
  @media (min-width: 2400px) {
    font-size: clamp(19px, 0.8vw, 22px);
  }
  
  @media (min-width: 3840px) {
    font-size: clamp(20px, 0.7vw, 24px);
  }
}

@layer utilities {
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .responsive-container {
    container-type: inline-size;
  }
}

@layer components {
  .matrix-cell {
    @apply min-w-11 h-11 flex items-center justify-center text-xs font-bold transition-colors;
  }
  
  /* Responsive matrix cells - más compactas para Team Builder */
  @media (min-width: 768px) {
    .matrix-cell {
      @apply min-w-10 h-10 text-xs;
    }
  }
  
  @media (min-width: 1024px) {
    .matrix-cell {
      @apply min-w-11 h-11 text-xs;
    }
  }
  
  @media (min-width: 1440px) {
    .matrix-cell {
      @apply min-w-12 h-12 text-sm;
    }
  }

  .type-badge {
    @apply px-2 py-0.5 rounded text-[0.65rem] uppercase font-bold text-white shadow-sm;
  }
  
  /* Responsive type badges */
  @media (min-width: 768px) {
    .type-badge {
      @apply px-3 py-1 text-xs;
    }
  }
  
  @media (min-width: 1024px) {
    .type-badge {
      @apply px-3 py-1.5 text-sm;
    }
  }

  .type-icon {
    @apply size-7 rounded-sm flex items-center justify-center text-[10px] font-bold text-white shadow-sm shrink-0 uppercase;
  }
  
  /* Responsive type icons - más compactos para Team Builder */
  @media (min-width: 768px) {
    .type-icon {
      @apply size-7 text-xs;
    }
  }
  
  @media (min-width: 1024px) {
    .type-icon {
      @apply size-8 text-xs;
    }
  }
  
  @media (min-width: 1440px) {
    .type-icon {
      @apply size-9 text-sm;
    }
  }

  .offensive-badge-x2 {
    @apply size-7 rounded-full bg-green-500/90 flex items-center justify-center text-white font-bold text-[10px] shadow-sm;
  }
  
  /* Responsive offensive badges - más compactos para Team Builder */
  @media (min-width: 768px) {
    .offensive-badge-x2 {
      @apply size-7 text-xs;
    }
  }
  
  @media (min-width: 1024px) {
    .offensive-badge-x2 {
      @apply size-8 text-xs;
    }
  }

  .offensive-badge-x4 {
    @apply size-7 rounded-full bg-orange-600 flex items-center justify-center text-white font-bold text-[10px] border border-orange-400/30 shadow-sm;
  }
  
  @media (min-width: 768px) {
    .offensive-badge-x4 {
      @apply size-7 text-xs;
    }
  }
  
  @media (min-width: 1024px) {
    .offensive-badge-x4 {
      @apply size-8 text-xs;
    }
  }

  .matrix-header-cell {
    @apply p-1 border-r border-slate-200 dark:border-[#233648] last:border-r-0;
  }
  
  @media (min-width: 768px) {
    .matrix-header-cell {
      @apply p-2;
    }
  }
  
  @media (min-width: 1024px) {
    .matrix-header-cell {
      @apply p-3;
    }
  }
}

/* Fluid typography utilities */
@layer utilities {
  .text-fluid-xs {
    font-size: clamp(0.625rem, 0.8vw, 0.75rem);
  }
  
  .text-fluid-sm {
    font-size: clamp(0.75rem, 1vw, 0.875rem);
  }
  
  .text-fluid-base {
    font-size: clamp(0.875rem, 1.2vw, 1rem);
  }
  
  .text-fluid-lg {
    font-size: clamp(1rem, 1.4vw, 1.125rem);
  }
  
  .text-fluid-xl {
    font-size: clamp(1.125rem, 1.6vw, 1.25rem);
  }
  
  .text-fluid-2xl {
    font-size: clamp(1.25rem, 1.8vw, 1.5rem);
  }
  
  .text-fluid-3xl {
    font-size: clamp(1.5rem, 2.2vw, 2rem);
  }
  
  .text-fluid-4xl {
    font-size: clamp(1.875rem, 2.6vw, 2.5rem);
  }
  
  .text-fluid-5xl {
    font-size: clamp(2.25rem, 3vw, 3rem);
  }
  
  .text-fluid-6xl {
    font-size: clamp(2.5rem, 3.4vw, 3.5rem);
  }
  
  /* Responsive spacing utilities */
  .space-fluid-2 {
    gap: clamp(0.5rem, 1vw, 1rem);
  }
  
  .space-fluid-4 {
    gap: clamp(1rem, 1.5vw, 1.5rem);
  }
  
  .space-fluid-6 {
    gap: clamp(1.5rem, 2vw, 2rem);
  }
  
  .space-fluid-8 {
    gap: clamp(2rem, 2.5vw, 3rem);
  }
}

.zebra-table tbody tr:nth-child(even) {
  @apply bg-slate-50 dark:bg-[#101922];
}

/* Custom scrollbar for matrix and dropdowns */
.custom-scrollbar::-webkit-scrollbar {
  height: 8px;
  width: 8px;
}

.pixelated {
  image-rendering: pixelated;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.dark .custom-scrollbar::-webkit-scrollbar-track {
  background: #1A1A1A;
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb {
  background: #333333;
}

/* Enhanced responsive container utilities */
@layer utilities {
  .responsive-container {
    container-type: inline-size;
  }
  
  /* Container query utilities */
  @container (min-width: 320px) {
    .container-sm {
      /* Styles for small containers */
    }
  }
  
  @container (min-width: 768px) {
    .container-md {
      /* Styles for medium containers */
    }
  }
  
  @container (min-width: 1024px) {
    .container-lg {
      /* Styles for large containers */
    }
  }
}

/* Breakpoint-specific grid utilities */
@layer utilities {
  .grid-responsive {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(max(250px, 40vw), 400px));
    gap: clamp(1rem, 2vw, 2rem);
  }
  
  .grid-tight {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(max(200px, 35vw), 350px));
    gap: clamp(0.75rem, 1.5vw, 1.5rem);
  }
  
  .grid-wide {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(max(300px, 45vw), 500px));
    gap: clamp(1.5rem, 2.5vw, 3rem);
  }
}

/* Prevent layout shift during loading */
@layer base {
  img {
    aspect-ratio: attr(width) / attr(height);
  }
  
  /* Maintain aspect ratios for common media */
  .aspect-pokemon {
    aspect-ratio: 1;
  }
  
  .aspect-sprite {
    aspect-ratio: 1;
  }
  
  .aspect-card {
    aspect-ratio: 4/3;
  }
}

/* Enhanced touch targets for mobile */
@layer utilities {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  @media (pointer: coarse) {
    .touch-target {
      min-height: 48px;
      min-width: 48px;
    }
  }
}

/* Zoom stability improvements */
@layer base {
  /* Prevent horizontal scroll on zoom */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  /* Ensure content stays within viewport */
  .overflow-safe {
    max-width: 100vw;
    overflow-x: auto;
  }
  
  /* Flexible containers that handle zoom */
  .flex-zoom-safe {
    flex-shrink: 1;
    min-width: 0;
  }
}